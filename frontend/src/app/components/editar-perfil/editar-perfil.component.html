<mat-accordion class="m-2 mat-elevation-z4">
    <mat-expansion-panel [expanded]="true" (opened)="panelOpenState = false" (closed)="panelOpenState = true">

        <mat-expansion-panel-header>
            <mat-panel-title>
                <h3>Datos Personales</h3>

            </mat-panel-title>

        </mat-expansion-panel-header>
        <form #formulario="ngForm" (ngSubmit)="onSubmit()">
            <div class="col-12">
                <div class="row">
                    <mat-label class="col-2 label mobile-label">Rut</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="rut" placeholder="Ingrese rut paciente" [(ngModel)]="objeto.rut" disabled>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Nombre</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="nombre" placeholder="Ingrese nombre" [(ngModel)]="objeto.nombre" required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Apellido</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="apellido" placeholder="Ingrese apellido" [(ngModel)]="objeto.apellido"
                            required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Correo</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput type="email" name="correo" placeholder="Ingrese correo"
                            [(ngModel)]="objeto.correo" [formControl]="emailFormControl" required>
                        <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                            Porfavor ingresar correo valido
                        </mat-error>
                        <mat-error *ngIf="emailFormControl.hasError('required')">
                            Correo es <strong>requerido</strong>
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Teléfono</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <span matPrefix>+56 &nbsp;</span>
                        <input matInput name="telefono" type="tel" placeholder="Ingrese telefono"
                            [(ngModel)]="objeto.telefono" required>
                    </mat-form-field>
                </div>

                <div class="row" *ngIf="userLog.rol == 2">
                    <mat-label class="col-2 label mobile-label">Fecha Nacimiento</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input name="fechaNacimiento" [(ngModel)]="objeto.fechaNacimiento" matInput
                            [matDatepicker]="picker" placeholder="Seleccionar fecha nacimiento" required>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker touchUi #picker disabled=false></mat-datepicker>
                    </mat-form-field>
                </div>

                <div class="row" *ngIf="userLog.rol == 2">
                    <mat-label class="col-2 label mobile-label">Dirección</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="direccion" placeholder="Ingrese direccion" [(ngModel)]="objeto.direccion"
                            required>
                    </mat-form-field>
                </div>
            </div>

            <mat-action-row>
                <div *ngIf="!ingresando">
                    <button type="submit" mat-raised-button color="primary">
                        <mat-icon>edit</mat-icon>
                        <span style="margin-left: 8px;">Editar Perfil</span>
                    </button>
                </div>
                <div *ngIf="ingresando" class="justify-content-center d-flex">
                    <mat-spinner></mat-spinner>
                </div>
            </mat-action-row>
        </form>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <h3>Cambiar Contraseña</h3>
            </mat-panel-title>
        </mat-expansion-panel-header>
        <form #formularioPass="ngForm" (ngSubmit)="cambiarPass()">
            <div class="col-12 ">
                <div class="row">
                    <mat-label class="col-2 label mobile-label">Contraseña Antigua</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="antigua" placeholder="Ingrese Contraseña Antigua"
                            [(ngModel)]="password.antigua" type="password" required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Contraseña Nueva</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12" >
                        <input matInput name="nueva" placeholder="Ingrese Contraseña Nueva" [(ngModel)]="password.nueva"
                            type="password" required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-label class="col-2 label mobile-label">Confirmar Contraseña</mat-label>
                    <mat-form-field class="col-sm-8 col-xs-12">
                        <input matInput name="confirmacion" placeholder="Reingrese Contraseña Nueva"
                            [(ngModel)]="password.confirmacion" type="password" required>
                    </mat-form-field>
                </div>
            </div>

            <!-- <div class="col-12 mobile-display">
                <div class="row">
                    <mat-form-field class="col-12">
                        <input matInput name="antigua" placeholder="Ingrese Contraseña Antigua"
                            [(ngModel)]="password.antigua" type="password" required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-form-field class="col-12">
                        <input matInput name="nueva" placeholder="Ingrese Contraseña Nueva" [(ngModel)]="password.nueva"
                            type="password" required>
                    </mat-form-field>
                </div>

                <div class="row">
                    <mat-form-field class="col-12">
                        <input matInput name="confirmacion" placeholder="Reingrese Contraseña Nueva"
                            [(ngModel)]="password.confirmacion" type="password" required>
                    </mat-form-field>
                </div>
            </div> -->

            <mat-action-row>
                <div *ngIf="!ingresando">
                    <button type="submit" mat-raised-button color="primary">
                        <mat-icon>edit</mat-icon>
                        <span style="margin-left: 8px;">Editar Constraseña</span>
                    </button>
                </div>
                <div *ngIf="ingresando" class="justify-content-center d-flex">
                    <mat-spinner></mat-spinner>
                </div>
            </mat-action-row>
        </form>


    </mat-expansion-panel>
</mat-accordion>